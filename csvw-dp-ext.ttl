@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix dct:  <http://purl.org/dc/terms/> .
@prefix csvw: <http://www.w3.org/ns/csvw#> .

@base <https://w3id.org/csvw-dp> .
@prefix dp: <https://w3id.org/csvw-dp#> .


# =====================================================
# Ontology declaration
# =====================================================

dp:
    a owl:Ontology ;
    dct:title "CSVW Differential Privacy Extension Vocabulary" ;
    owl:versionInfo "0.2.0" ;
    owl:versionIRI <https://w3id.org/csvw-dp/0.2.0> ;

    dct:description """
    A vocabulary extending W3C CSV on the Web metadata with explicit
    differential privacy modeling primitives, including contribution bounds,
    partition constraints, and public partition specifications for both
    categorical and continuous columns.
    """ ;

    dct:creator <https://github.com/dscc-admin-ch> ;
    dct:publisher <https://github.com/dscc-admin-ch> ;
    dct:created "2026-02-04"^^xsd:date ;

    dct:license <https://creativecommons.org/licenses/by/4.0/> ;
    owl:imports <http://www.w3.org/ns/csvw> ;
    rdfs:seeAlso <https://github.com/dscc-admin-ch/csvw-dp> .


# =====================================================
# CLASSES
# =====================================================

dp:Groupable a rdfs:Class ;
    rdfs:label "Groupable" ;
    rdfs:comment """
    Abstract class for entities that can define partitions used in
    differential privacy aggregation. Includes single columns and
    multi-column groups.
    """ .


dp:ColumnGroup a rdfs:Class ;
    rdfs:subClassOf dp:Groupable ;
    rdfs:label "ColumnGroup" ;
    rdfs:comment """
    Represents a grouping key formed by two or more columns.
    """ .


dp:PartitionDefinition a rdfs:Class ;
    rdfs:label "Partition definition" ;
    rdfs:comment """
    Describes one public partition key. Can represent:

    • A categorical value
    • A numeric interval
    • A multi-column key combination

    Allows attaching optional per-partition DP bounds.
    """ .


# =====================================================
# TABLE-LEVEL PROPERTIES
# =====================================================

dp:maxTableLength a rdf:Property ;
    rdfs:domain csvw:Table ;
    rdfs:range xsd:positiveInteger ;
    rdfs:label "maxTableLength" ;
    rdfs:comment "Upper bound on total rows." .


dp:tableLength a rdf:Property ;
    rdfs:domain csvw:Table ;
    rdfs:range xsd:positiveInteger ;
    rdfs:label "tableLength" ;
    rdfs:comment "Observed number of rows, if known." .


dp:maxContributions a rdf:Property ;
    rdfs:domain csvw:Table ;
    rdfs:range xsd:positiveInteger ;
    rdfs:label "maxContributions" ;
    rdfs:comment "Maximum number of rows contributed by one individual." .


# =====================================================
# COLUMN PROPERTIES
# =====================================================

dp:privacyId a rdf:Property ;
    rdfs:domain csvw:Column ;
    rdfs:range xsd:boolean ;
    rdfs:label "privacyId" ;
    rdfs:comment "True if column identifies privacy unit." .


dp:nullableProportion a rdf:Property ;
    rdfs:domain csvw:Column ;
    rdfs:range xsd:decimal ;
    rdfs:label "nullableProportion" ;
    rdfs:comment "Approximate fraction of null values." .


dp:publicPartitions a rdf:Property ;
    rdfs:domain dp:Groupable ;
    rdfs:range rdf:List ;
    rdfs:label "publicPartitions" ;
    rdfs:comment """
    Declared set of allowed public partition keys.

    Each entry may be:
    • Literal value (categorical partition)
    • dp:PartitionDefinition object (structured partition)
    """ .


# =====================================================
# PARTITION STRUCTURE
# =====================================================

dp:partitionValue a rdf:Property ;
    rdfs:domain dp:PartitionDefinition ;
    rdfs:range rdfs:Literal ;
    rdfs:label "partitionValue" ;
    rdfs:comment "Categorical partition value." .


dp:lowerBound a rdf:Property ;
    rdfs:domain dp:PartitionDefinition ;
    rdfs:range xsd:decimal ;
    rdfs:label "lowerBound" ;
    rdfs:comment "Inclusive lower bound of numeric partition." .


dp:upperBound a rdf:Property ;
    rdfs:domain dp:PartitionDefinition ;
    rdfs:range xsd:decimal ;
    rdfs:label "upperBound" ;
    rdfs:comment "Exclusive or inclusive upper bound (implementation defined)." .


dp:partitionLabel a rdf:Property ;
    rdfs:domain dp:PartitionDefinition ;
    rdfs:range xsd:string ;
    rdfs:label "partitionLabel" ;
    rdfs:comment "Human-readable label." .


# =====================================================
# DP AGGREGATION BOUNDS
# =====================================================

dp:maxPartitionLength a rdf:Property ;
    rdfs:domain dp:Groupable ;
    rdfs:range xsd:positiveInteger ;
    rdfs:label "maxPartitionLength" ;
    rdfs:comment "Maximum number of rows inside any partition." .


dp:maxNumPartitions a rdf:Property ;
    rdfs:domain dp:Groupable ;
    rdfs:range xsd:positiveInteger ;
    rdfs:label "maxNumPartitions" ;
    rdfs:comment "Maximum number of distinct partitions." .


dp:maxInfluencedPartitions a rdf:Property ;
    rdfs:domain dp:Groupable ;
    rdfs:range xsd:positiveInteger ;
    rdfs:label "maxInfluencedPartitions" ;
    rdfs:comment "Maximum partitions a person may influence (l0 bound)." .


dp:maxPartitionContribution a rdf:Property ;
    rdfs:domain dp:Groupable ;
    rdfs:range xsd:positiveInteger ;
    rdfs:label "maxPartitionContribution" ;
    rdfs:comment "Maximum contributions within a partition (l_inf bound)." .


# =====================================================
# COLUMN GROUP STRUCTURE
# =====================================================

dp:columns a rdf:Property ;
    rdfs:domain dp:ColumnGroup ;
    rdfs:range rdf:List ;
    rdfs:label "columns" ;
    rdfs:comment "Columns forming the grouping key." .
