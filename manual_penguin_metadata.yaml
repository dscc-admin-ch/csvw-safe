@context:
  - http://www.w3.org/ns/csvw
  - dp: https://w3id.org/csvw-dp#

url: penguins.csv

tableSchema:

  dp:maxContributions: 2
  dp:maxTableLength: 344
  dp:tableLength: 344

  columns:

    - name: island
      datatype: string
      dp:privacyId: false
      required: true
      dp:nullableProportion: 0.0

      dp:publicPartitions:
        - Torgersen
        - Biscoe
        - Dream

        # Enable filtered derived column
        - @type: dp:PartitionDefinition
          dp:partitionValue: Torgersen
          dp:maxPartitionLength: 50

      dp:maxNumPartitions: 3
      dp:maxPartitionLength: 200
      dp:maxInfluencedPartitions: 1
      dp:maxPartitionContribution: 2


    - name: species
      datatype: string
      dp:privacyId: false
      required: true
      dp:nullableProportion: 0.0
    
      dp:publicPartitions:
    
        - @type: dp:PartitionDefinition
          dp:partitionValue: Adelie
          dp:maxPartitionLength: 160
          dp:maxPartitionContribution: 2
          dp:maxInfluencedPartitions: 1
    
        - @type: dp:PartitionDefinition
          dp:partitionValue: Chinstrap
          dp:maxPartitionLength: 70
          dp:maxPartitionContribution: 2
          dp:maxInfluencedPartitions: 1
    
        - @type: dp:PartitionDefinition
          dp:partitionValue: Gentoo
          dp:maxPartitionLength: 130
          dp:maxPartitionContribution: 2
          dp:maxInfluencedPartitions: 1
    
      dp:maxNumPartitions: 3
      dp:maxPartitionLength: 200
      dp:maxInfluencedPartitions: 1
      dp:maxPartitionContribution: 2


    - name: bill_length_mm
      datatype: double
      dp:privacyId: false
      minimum: 30.0
      maximum: 65.0
      required: true
      dp:nullableProportion: 0.0


    - name: bill_depth_mm
      datatype: double
      dp:privacyId: false
      minimum: 13.0
      maximum: 23.0
      required: false
      dp:nullableProportion: 0.05


    - name: flipper_length_mm
      datatype: double
      dp:privacyId: false
      minimum: 150.0
      maximum: 250.0
      required: false
      dp:nullableProportion: 0.05


    - name: body_mass_g
      datatype: double
      dp:privacyId: false
      minimum: 2000.0
      maximum: 7000.0
      required: false
      dp:nullableProportion: 0.05

      dp:recommendedBreaks:
        - 2000
        - 3000
        - 4000
        - 5000
        - 6000
        - 7000

      dp:publicPartitions:

        - @type: dp:PartitionDefinition
          dp:lowerBound: 2000
          dp:upperBound: 3000
          dp:lowerInclusive: true
          dp:upperInclusive: true
          dp:maxPartitionLength: 100
          dp:maxPartitionContribution: 1

        - @type: dp:PartitionDefinition
          dp:lowerBound: 3000
          dp:upperBound: 4000
          dp:lowerInclusive: true
          dp:upperInclusive: true
          dp:maxPartitionLength: 100
          dp:maxPartitionContribution: 1

        - @type: dp:PartitionDefinition
          dp:lowerBound: 5000
          dp:upperBound: 6000
          dp:lowerInclusive: true
          dp:upperInclusive: true
          dp:maxPartitionLength: 100
          dp:maxPartitionContribution: 1

        - @type: dp:PartitionDefinition
          dp:lowerBound: 6000
          dp:upperBound: 7000
          dp:lowerInclusive: true
          dp:upperInclusive: true
          dp:maxPartitionLength: 100
          dp:maxPartitionContribution: 1

      dp:maxNumPartitions: 4
      dp:maxPartitionLength: 100
      dp:maxInfluencedPartitions: 1
      dp:maxPartitionContribution: 1


    - name: sex
      datatype: string
      dp:privacyId: false
      required: false
      dp:nullableProportion: 0.2
      dp:publicPartitions:
        - MALE
        - FEMALE
      dp:maxNumPartitions: 2
      dp:maxPartitionLength: 300
      dp:maxInfluencedPartitions: 1
      dp:maxPartitionContribution: 2


  dp:columnGroups:

    - @type: dp:ColumnGroup
      dp:columns:
        - sex
        - island
      dp:maxNumPartitions: 6
      dp:maxPartitionLength: 100
      dp:maxInfluencedPartitions: 1
      dp:maxPartitionContribution: 2

    - @type: dp:ColumnGroup
      dp:columns:
        - species
        - sex
      dp:maxNumPartitions: 6
      dp:maxPartitionLength: 100
      dp:maxInfluencedPartitions: 1
      dp:maxPartitionContribution: 2

    - @type: dp:ColumnGroup
      dp:columns:
        - species
        - body_mass_g
      dp:maxNumPartitions: 6
      dp:maxPartitionLength: 50
      dp:maxInfluencedPartitions: 1
      dp:maxPartitionContribution: 1

    - @type: dp:ColumnGroup
      dp:columns:
        - species
        - island
      dp:publicPartitions:
        - "Torgersen, Adelie"
        - "Biscoe, Adelie"
        - "Biscoe, Chinstrap"
        - "Dream, Adelie"
        - "Dream, Chinstrap"
        - "Dream, Gentoo"
      dp:maxNumPartitions: 6
      dp:maxPartitionLength: 100
      dp:maxInfluencedPartitions: 1
      dp:maxPartitionContribution: 2

    - @type: dp:ColumnGroup
      dp:columns:
        - species
        - island
        - sex
      dp:maxNumPartitions: 18
      dp:maxPartitionLength: 50
      dp:maxInfluencedPartitions: 1
      dp:maxPartitionContribution: 2
