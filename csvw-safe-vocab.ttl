@prefix csvw-safe: <https://w3id.org/csvw-safe#> .
@prefix csvw:      <http://www.w3.org/ns/csvw#> .
@prefix rdf:       <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:      <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:       <http://www.w3.org/2002/07/owl#> .
@prefix xsd:       <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms:   <http://purl.org/dc/terms/> .


# =====================================================
# Ontology
# =====================================================

csvw-safe:
    a owl:Ontology ;
    dct:title "CSVW Differential Privacy Extension Vocabulary" ;
    owl:versionInfo "0.3.0" ;
    owl:versionIRI <https://w3id.org/csvw-dp/0.3.0> ;
    dct:description """
    A vocabulary extending W3C CSV on the Web metadata for expressing
    safe structural and differential privacy modeling assumptions.
    """ ;
    dct:creator <https://github.com/dscc-admin-ch> ;
    dct:publisher <https://github.com/dscc-admin-ch> ;
    dct:created "2026-02-04"^^xsd:date ;
    dct:license <https://creativecommons.org/licenses/by/4.0/> ;
    owl:imports <http://www.w3.org/ns/csvw> ;
    rdfs:seeAlso <https://github.com/dscc-admin-ch/csvw-dp> .


#################################################################
# Core Classes
#################################################################

csvw-safe:DPBounded a owl:Class ;
    rdfs:label "DP Bounded Entity" ;
    rdfs:comment "Abstract class for entities that declare differential privacy contribution bounds." .

csvw-safe:GroupingKey a owl:Class ;
    rdfs:subClassOf csvw-safe:DPBounded ;
    rdfs:label "Grouping Key" ;
    rdfs:comment "Abstract grouping space over which aggregation or partitioning may occur." .

csvw-safe:ColumnGroup a owl:Class ;
    rdfs:subClassOf csvw-safe:GroupingKey ;
    rdfs:label "Column Group" ;
    rdfs:comment "Multi-column grouping key composed of an ordered list of columns." .

csvw-safe:PartitionKey a owl:Class ;
    rdfs:subClassOf csvw-safe:DPBounded ;
    rdfs:label "Partition Key" ;
    rdfs:comment "Represents one allowed partition within a grouping key." .

#################################################################
# CSVW Alignments
#################################################################

csvw:Table rdfs:subClassOf csvw-safe:DPBounded .

csvw:Column rdfs:subClassOf csvw-safe:GroupingKey .

#################################################################
# Structural Modeling Properties
#################################################################

csvw-safe:privacyId a owl:DatatypeProperty ;
    rdfs:domain csvw:Column ;
    rdfs:range xsd:boolean ;
    rdfs:label "privacy identifier flag" ;
    rdfs:comment "Indicates that the column identifies individuals or units and must not participate in DP aggregation." .

csvw-safe:nullableProportion a owl:DatatypeProperty ;
    rdfs:domain csvw:Column ;
    rdfs:range xsd:decimal ;
    rdfs:label "nullable proportion" ;
    rdfs:comment "Approximate fraction (0â€“1) of null values in the column." .

csvw-safe:dependsOn a owl:ObjectProperty ;
    rdfs:domain csvw:Column ;
    rdfs:range csvw:Column ;
    rdfs:label "depends on column" ;
    rdfs:comment "Declares a dependency relationship with another column." .

csvw-safe:how a owl:DatatypeProperty ;
    rdfs:domain csvw:Column ;
    rdfs:range xsd:string ;
    rdfs:label "dependency type" ;
    rdfs:comment "Specifies dependency type: 'bigger', 'smaller', or 'mapping'." .

csvw-safe:mapping a owl:ObjectProperty ;
    rdfs:domain csvw:Column ;
    rdfs:label "dependency mapping" ;
    rdfs:comment "Required if dependency type is 'mapping'; describes value mapping relationship." .

csvw-safe:maxNumPartitions a owl:DatatypeProperty ;
    rdfs:range xsd:integer ;
    rdfs:label "maximum number of partitions" ;
    rdfs:comment "Structural upper bound on number of distinct partitions induced by a grouping key." .

csvw-safe:columns a owl:ObjectProperty ;
    rdfs:domain csvw-safe:ColumnGroup ;
    rdfs:range csvw:Column ;
    rdfs:label "columns" ;
    rdfs:comment "Ordered list of columns forming a multi-column grouping key." .

#################################################################
# Public Partitions
#################################################################

csvw-safe:publicPartitions a owl:ObjectProperty ;
    rdfs:domain csvw-safe:GroupingKey ;
    rdfs:range csvw-safe:PartitionKey ;
    rdfs:label "public partitions" ;
    rdfs:comment "Explicit universe of allowed partitions for a grouping key." .

csvw-safe:partitionValue a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:PartitionKey ;
    rdfs:range rdfs:Literal ;
    rdfs:label "partition value" ;
    rdfs:comment "Categorical partition value." .

csvw-safe:lowerBound a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:PartitionKey ;
    rdfs:range xsd:decimal ;
    rdfs:label "lower bound" ;
    rdfs:comment "Lower bound of numeric partition interval." .

csvw-safe:upperBound a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:PartitionKey ;
    rdfs:range xsd:decimal ;
    rdfs:label "upper bound" ;
    rdfs:comment "Upper bound of numeric partition interval." .

csvw-safe:lowerInclusive a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:PartitionKey ;
    rdfs:range xsd:boolean ;
    rdfs:label "lower inclusive" ;
    rdfs:comment "Whether lower bound is inclusive (default true)." .

csvw-safe:upperInclusive a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:PartitionKey ;
    rdfs:range xsd:boolean ;
    rdfs:label "upper inclusive" ;
    rdfs:comment "Whether upper bound is inclusive (default false)." .

csvw-safe:partitionLabel a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:PartitionKey ;
    rdfs:range xsd:string ;
    rdfs:label "partition label" ;
    rdfs:comment "Optional human-readable label for partition." .

csvw-safe:components a owl:ObjectProperty ;
    rdfs:domain csvw-safe:PartitionKey ;
    rdfs:range csvw-safe:PartitionKey ;
    rdfs:label "components" ;
    rdfs:comment "Recursive per-column constraints for multi-column partition keys." .

#################################################################
# Differential Privacy Properties
#################################################################

csvw-safe:maxLength a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:DPBounded ;
    rdfs:range xsd:integer ;
    rdfs:label "maximum length" ;
    rdfs:comment "Maximum number of rows in a partition." .

csvw-safe:maxContribution a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:DPBounded ;
    rdfs:range xsd:integer ;
    rdfs:label "maximum contribution" ;
    rdfs:comment "Maximum rows contributed by one individual within a partition." .

csvw-safe:maxInfluencedPartitions a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:GroupingKey ;
    rdfs:range xsd:integer ;
    rdfs:label "maximum influenced partitions" ;
    rdfs:comment "Maximum number of distinct partitions an individual may affect." .

csvw-safe:publicLength a owl:DatatypeProperty ;
    rdfs:domain csvw-safe:DPBounded ;
    rdfs:range xsd:integer ;
    rdfs:label "public length" ;
    rdfs:comment "Actual number of rows if publicly known." .